<include file="Public/headerr" /> 

<div class="right_col" role="main" style="">
  
          
<div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12" style="height:100%;">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>VSE未删除人员 <small></small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                    <!-- <p class="text-muted font-13 m-b-30">
                      DataTables has most features enabled by default, so all you need to do to use it with your own tables is to call the construction function: <code>$().DataTable();</code>
                    </p> -->
                    <table id="datatable2" class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>id</th>
                          <th>vse</th>
                          <th>vse_id</th>
                          <th>科室</th>
                          <th>上级</th>
                          <th>project</th>
                          <th>操作</th>
                        </tr>
                      </thead>


                      <tbody>
                       <volist name="vse" id="vo">
                       <tr>
                       <td>{$vo.id}</td>
                       <td>{$vo.vse}</td>
                       <td>{$vo.vse_id}</td>
                       <td>{$vo.office}</td>
                       <td>{$vo.leader}</td>
                       <td>{$vo.project}</td>
                       <td style="width:250px;">
                       <a class="btn btn-default btn-lg active" href="#" onclick="fn(this)" role="button" data-toggle="modal"  data-target="#bianji">编辑</a>
                       <a id="{$vo.id}" class="btn btn-default btn-lg active" onclick="fnn(this)">删除</a>
                       </td>
                       </tr>
                       </volist>
                      </tbody>
                    </table>
                    <a class="btn btn-default btn-lg active" href="#" role="button" data-toggle="modal"  data-target="#login">添加</a>
                  </div>
                </div>
              </div>


              <div class="col-md-12 col-sm-12 col-xs-12" style="height:100%;">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>VSE删除人员 <small></small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                    <!-- <p class="text-muted font-13 m-b-30">
                      DataTables has most features enabled by default, so all you need to do to use it with your own tables is to call the construction function: <code>$().DataTable();</code>
                    </p> -->
                    <table id="datatable3" class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>id</th>
                          <th>vse</th>
                          <th>vse_id</th>
                          <th>科室</th>
                          <th>上级</th>
                          <th>project</th>
                          <th>操作</th>
                        </tr>
                      </thead>


                      <tbody>
                       <volist name="vse1" id="vo">
                       <tr>
                       <td>{$vo.id}</td>
                       <td>{$vo.vse}</td>
                       <td>{$vo.vse_id}</td>
                       <td>{$vo.office}</td>
                       <td>{$vo.leader}</td>
                       <td>{$vo.project}</td>
                       <td><a id="{$vo.id}" class="btn btn-default btn-lg active" onclick="fnnn(this)">恢复</a></td>
                       </tr>
                       </volist>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
</div>
</div>


<div class="modal fade" id="login" tabindex="-1" role="dialog" 
   aria-labelledby="myModalLabel" aria-hidden="true" style="float: right; border: 1px solid #333;"> 
     <div class="modal-dialog">
      <div class="modal-content">
       <div class="modal-header">
        <button type="button" class="close" 
           data-dismiss="modal" aria-hidden="true">
            &times;
        </button>
        <h4 class="modal-title" id="myModalLabel">
           添加VSE：
        </h4>
       </div>
       <!--登陆主体 -->
      <div class="modal-body">
          
         <table class="table">
          <tr>
            <th>VSE:</th>
            <td>
            <div class="form-group has-success"><select  class="form-control" id="vse" name="vse">
            <option value=""></option>
              <volist name="form_vse" id="form_vse">
              <option value="{$form_vse.username}">{$form_vse.username}</option>
              </volist>
            </select></div></td>
          </tr>
          <!-- <tr>
            <th>工号:</th><td><input type="text" name="lzh_upass" id="lzh_upass" 
            class="form-control"
            placeholder="password"></td>
          </tr> -->
          <tr>
            <th>project:</th>
            <td><div class="form-group has-success"><select  class="form-control" id="projectt" name="projectt">
            <option value=""></option>
              <volist name="project" id="v">
              <option value="{$v.project_name}">{$v.project_name}</option>
              </volist>
            </select></div></td>
          </tr>
         </table>
         <input type="button" id="sub-form" class="btn-block btn-lg btn-primary" value="提交">
          
      </div>
      </div><!-- /.modal-content -->
      </div><!-- /.modal -->
</div>



<div class="modal fade" id="bianji" tabindex="-1" role="dialog" 
   aria-labelledby="myModalLabel" aria-hidden="true" style="float: right; border: 1px solid #333;"> 
     <div class="modal-dialog">
      <div class="modal-content">
       <div class="modal-header">
        <button type="button" class="close" 
           data-dismiss="modal" aria-hidden="true">
            &times;
        </button>
        <h4 class="modal-title" id="myModalLabel">
           编辑VSE：
        </h4>
       </div>
       <!--编辑主体 -->
      <div class="modal-body">
          
         <table class="table">
          <tr>
            <th>vse_id:</th>
            <td><input type="hidden" id="text0" class="form-control">
          <input type="text" id="text2" name="text[]" class="form-control" disabled="disabled"></td>
          </tr>
          <tr>
            <th>VSE:</th>
          <td><input type="text" id="text1" name="text[]" class="form-control" disabled="disabled"></td>
          </tr>
          <tr>
            <th>project:</th>
            <td><select class="form-control" id="itempro">
            <option value=""></option>
             <volist name="project" id="pro">
             <option value="{$pro.project_name}">{$pro.project_name}</option>
             </volist>
            </select></td>
          </tr>
         </table>
         <input type="button" id="sub-mod" class="btn-block btn-lg btn-primary" value="提交">
          
      </div>
      </div><!-- /.modal-content -->
      </div><!-- /.modal -->
</div>


<include file="Public/foot" /> 
 
    <!-- Datatables -->
    <script src="__PUBLIC__/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="__PUBLIC__/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <!-- Datatables -->
<script type="text/javascript">
 $(document).ready(function() {
       

        $('#datatable2').dataTable();

        $('#datatable3').dataTable();

      });
    
    $(function(){
    $("#sub-form").click(function(){
      var vse = $("#vse").val();
      var project = $("#projectt").val();
      var action = "vseform";
      if(vse=="" || project==""){
        alert("vse和projcet不能为空");
        return false;
      }
      $.ajax({
        type:"POST",
        url:action,
        dataType:"json",
        data:{"vse":vse,"project":project},
        success:function(data){
          if(data.success==1){
            alert('添加成功!');
            location.href='vse.html';
          }
          if(data.success==-1){  
            alert('已存在该vse!');
          }
          if(data.success==0){ 
          //alert(data.username);
          alert("添加失败！");
            return false;
          }
        }
      });
  });
    $("#sub-mod").click(function(){
      var itemid = $("#text0").val();
      var itempro = $("#itempro").val();
      var itemuid = $("#text2").val();
      var action = "vsemod";
      if(itempro==""){
        alert("请选择项目！");
        return false;
      }
      $.ajax({
        type:"POST",
        url:action,
        dataType:"json",
        data:{"itemid":itemid,"itempro":itempro,"itemuid":itemuid},
        success:function(data){
          if(data.success==1){
            alert('编辑成功!');
            //alert(data.ss);
            location.href='vse.html';
          }
          if(data.success==-1){  
            alert('该vse已有该工程!');
          }
          if(data.success==0){ 
          //alert(data.username);
          alert("编辑失败！");
            return false;
          }
        }
      });
  });
  });
    
    function fn(tt){
       var tr1 = tt.parentNode.parentNode;  
       for(var i=0;i<=4;i++)
       {
            document.getElementById("text"+i).value = tr1.cells[i].innerText;
       }
    }
    function fnn(nn){
       var re=nn.id;
       //alert(re);
       var action = "deletevse";
    if (confirm("确定要删除吗？")) 
             {      
      $.ajax({
        type:"GET",
        url:action,
        data:{"vid":re},
        dataType:"json",
        success:function(data){
          if(data.success==1){  
             alert("删除成功!");
              location.href='vse.html';
          }
          else{
          alert("删除失败！");
          }
        }
      });
    }
  }
  function fnnn(nn){
       var re=nn.id;
       //alert(re);
       var action = "recovervse";
    if (confirm("确定要恢复吗？")) 
             {      
      $.ajax({
        type:"GET",
        url:action,
        data:{"vid":re},
        dataType:"json",
        success:function(data){
          if(data.success==1){  
             alert("恢复成功!");
              location.href='vse.html';
          }
          else{
          alert("恢复失败！");
          }
        }
      });
    }
  }
     
    </script>
    <!-- /Datatables -->
